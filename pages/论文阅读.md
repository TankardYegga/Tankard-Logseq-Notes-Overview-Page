- [[flomo]]
  #+flomo_tag: 论文阅读
	- 2022-05-19 08:58:23
	   #DeepLearning/脂肪肝 #论文阅读
	  
	  https://arxiv.org/abs/2104.05570
	  
	  * *现有的问题*
	  
	  脂肪活检是脂肪肝变性的金标准，但是执行该步骤导致的风险和代价阻碍了大规模数据集的收集；超声图像-诊断结果 可以从医院的PACS系统中轻松获取，但是由于超声诊断的主观性，诊断结果容易受到诊断者自身或者诊断者之间变化性的影响。
	  
	  * *现有的解决方法*
	  
	  1）包括expectation- maximization(EM)、multi-rater consensus modeling (MRCM)、STAPLE，但是*都需要对于同一个样本有多个诊断者（rater）的诊断数据，而我们数据通常只有一个诊断者*。
	  2）针对1）的现有方法提出了评估标注者混淆矩阵、为每个独立的个体或者群组诊断者训练单独模型等方法，但是存在 *假设并不一定成立、计算开销大等问题*
	  
	  * *本论文模型*
	  
	  *核心思想*：使用一组可学习的潜在嵌入来表示不同诊断者（rater），将这些潜在嵌入进行维度转化和复制操作后，就可以插入到任意主干网络的任意卷积层或者全连接层之后。整个网络关于潜在嵌入没有显式的编码层，而是通过损失函数的约束来自动学习的，所以被认为是基于自动解码器的网络结构。整个网络的损失函数由两个子部分组成，其中一部分是各个诊断者关于每个样本预测的损失值之和，另一部分是各个诊断者潜在嵌入的参数平方和（类似于L2正则项），对该损失函数的求解可以使用梯度下降法。
	  
	  *two insights:*
	  1) 为什么对潜在嵌入进行维度转化和复制操作？
	  【1】因为不同模型的不同卷积层、全连接层对应的维度千差万别，潜在嵌入的维度也可以按照需要人为规定，*为了使得潜在嵌入与传统模型的集成更加灵活，也为了能够不改变传统模型结构进而能直接使用预训练权重*，我们*只对潜在嵌入进行转化操作，并将转化后的潜在嵌入与传统模型的不同子结构的输出进行相加*。
	  【2】注意重复操作是将一个向量重复*总像素数 次数，相当于是把每个评价者的个人评价倾向注入到了每个像素点对应的token里面。*
	  【3】论文中是只注入一次，是否可以在不同子结构处注入多次值得进一步研究。
	  【4】复制、拼接、线性转化是另一种注入方式。哪一种效果好需要实验来证明。
	  
	  2) 损失函数这样设计是为什么？
	  【1】是基于后验概率最大化的统计学原理。论文中的后验概率指的是在已知图像的条件下得到目前潜在嵌入Z的概率，其等于 各个评价者【对应的潜在嵌入的先验概率分布（均值为0的高斯分布）* 在该概率分布下预测正确每个样本的主观标签值的概率】的乘积。
	  【2】具体计算样本预测的损失值时可以采用与任务适配的任何相关函数，包括分割、分类、检测等任务。
	  
	  *训练和测试的trick：*
	  [1] 训练时先对所有的潜在嵌入Z进行训练；然后固定主干网络、其他所有评价者对应的潜在嵌入，在数据集上来fine-tune当前评价者对应的潜在嵌入
	  
	  *优点：*
	  【1】避免像EM算法那样复杂，可以使用梯度下降法
	  【2】算法虽然仍然针对的样本数据是：一个样本有多个评价者的主观标签值，但是在一个样本只有1个主管标签值这样的极端情形下也能够正常工作。保证了应用上的泛化性。
	  【3】可以应用于多任务。
	  
	  
	  *具体实现的相关思考：*
	  【1】 每个潜在嵌入用高斯分布初始化时的方差要怎么设置？
	  【2】这里针对dcm数据要怎么来处理模型呢？把dcm数据变成JPG图片？是使用连续的dcm还是单张的dcm？
	  【3】这里面预训练权重是不加潜在嵌入然后直接用模型训练吗？
	  【4】训练潜在嵌入的时候需要冻结传统模型吗？感觉是不用
	  #+memo_url: https://flomoapp.com/mine/?memo_id=MjQ1NDk4ODY
	  #+flomo_id: MjQ1NDk4ODY
	  #+created: 2022-05-19 08:58:23
	  #+updated: 2022-06-09 23:07:19
		- ![image](https://flomo.oss-cn-shanghai.aliyuncs.com/file/2022-05-19/370015/cf0ece25f3631fa9973e7304e7f47f63.png?OSSAccessKeyId=LTAI4G9PcaGksWVKCPrE1TVL&Expires=1677138004&Signature=1fT3uESBNobdPNVzxboPEoiAATI%3D)
		  ![image](https://flomo.oss-cn-shanghai.aliyuncs.com/file/2022-05-19/370015/7a6c87913815b64d62cecf83af4815ce.png?OSSAccessKeyId=LTAI4G9PcaGksWVKCPrE1TVL&Expires=1677138004&Signature=is0RqmH62FNXglw%2BWNjBeO2fiGI%3D)
		  ![image](https://flomo.oss-cn-shanghai.aliyuncs.com/file/2022-05-19/370015/1e58782a979b552d0ee55c1f7d672cb2.png?OSSAccessKeyId=LTAI4G9PcaGksWVKCPrE1TVL&Expires=1677138004&Signature=xhLteFa5hYaC%2B2b6yG1RHZ0HsIg%3D)
		  ![image](https://flomo.oss-cn-shanghai.aliyuncs.com/file/2022-05-19/370015/7409526faf0fbd59b9dbd3ec8bc8e61b.png?OSSAccessKeyId=LTAI4G9PcaGksWVKCPrE1TVL&Expires=1677138004&Signature=wUNnW7TgQgxebu7BrfrsS9pTfCg%3D)
		  #+isImg: true
	-